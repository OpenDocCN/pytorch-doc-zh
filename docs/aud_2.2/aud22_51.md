# torchaudio.transforms

> 原文：[https://pytorch.org/audio/stable/transforms.html](https://pytorch.org/audio/stable/transforms.html)

`torchaudio.transforms`模块包含常见的音频处理和特征提取。以下图表显示了一些可用变换之间的关系。

![https://download.pytorch.org/torchaudio/tutorial-assets/torchaudio_feature_extractions.png](../Images/82ba49f78e3cd14b6e337acaf57b11e2.png)

变换是使用[`torch.nn.Module`](https://pytorch.org/docs/stable/generated/torch.nn.Module.html#torch.nn.Module "(在PyTorch v2.1中)")实现的。构建处理流程的常见方法是定义自定义Module类或使用[`torch.nn.Sequential`](https://pytorch.org/docs/stable/generated/torch.nn.Sequential.html#torch.nn.Sequential "(在PyTorch v2.1中)")链接模块，然后将其移动到目标设备和数据类型。

```py
# Define custom feature extraction pipeline.
#
# 1\. Resample audio
# 2\. Convert to power spectrogram
# 3\. Apply augmentations
# 4\. Convert to mel-scale
#
class MyPipeline(torch.nn.Module):
    def __init__(
        self,
        input_freq=16000,
        resample_freq=8000,
        n_fft=1024,
        n_mel=256,
        stretch_factor=0.8,
    ):
        super().__init__()
        self.resample = Resample(orig_freq=input_freq, new_freq=resample_freq)

        self.spec = Spectrogram(n_fft=n_fft, power=2)

        self.spec_aug = torch.nn.Sequential(
            TimeStretch(stretch_factor, fixed_rate=True),
            FrequencyMasking(freq_mask_param=80),
            TimeMasking(time_mask_param=80),
        )

        self.mel_scale = MelScale(
            n_mels=n_mel, sample_rate=resample_freq, n_stft=n_fft // 2 + 1)

    def forward(self, waveform: torch.Tensor) -> torch.Tensor:
        # Resample the input
        resampled = self.resample(waveform)

        # Convert to power spectrogram
        spec = self.spec(resampled)

        # Apply SpecAugment
        spec = self.spec_aug(spec)

        # Convert to mel-scale
        mel = self.mel_scale(spec)

        return mel 
```

```py
# Instantiate a pipeline
pipeline = MyPipeline()

# Move the computation graph to CUDA
pipeline.to(device=torch.device("cuda"), dtype=torch.float32)

# Perform the transform
features = pipeline(waveform) 
```

请查看涵盖变换深入使用的教程。

![音频特征提取](../Images/fc6b9ddc12696e086aaac0cd46a41785.png)

[音频特征提取](tutorials/audio_feature_extractions_tutorial.html#sphx-glr-tutorials-audio-feature-extractions-tutorial-py)

音频特征提取

## 实用工具[](#utility "跳转到此标题")

| [`AmplitudeToDB`](generated/torchaudio.transforms.AmplitudeToDB.html#torchaudio.transforms.AmplitudeToDB "torchaudio.transforms.AmplitudeToDB") | 将张量从功率/幅度比例转换为分贝比例。 |
| --- | --- |
| [`MuLawEncoding`](generated/torchaudio.transforms.MuLawEncoding.html#torchaudio.transforms.MuLawEncoding "torchaudio.transforms.MuLawEncoding") | 基于mu-law压缩对信号进行编码。 |
| [`MuLawDecoding`](generated/torchaudio.transforms.MuLawDecoding.html#torchaudio.transforms.MuLawDecoding "torchaudio.transforms.MuLawDecoding") | 解码mu-law编码的信号。 |
| [`Resample`](generated/torchaudio.transforms.Resample.html#torchaudio.transforms.Resample "torchaudio.transforms.Resample") | 将信号从一个频率重新采样到另一个频率。 |
| [`Fade`](generated/torchaudio.transforms.Fade.html#torchaudio.transforms.Fade "torchaudio.transforms.Fade") | 为波形添加淡入和/或淡出。 |
| [`Vol`](generated/torchaudio.transforms.Vol.html#torchaudio.transforms.Vol "torchaudio.transforms.Vol") | 调整波形的音量。 |
| [`Loudness`](generated/torchaudio.transforms.Loudness.html#torchaudio.transforms.Loudness "torchaudio.transforms.Loudness") | 根据ITU-R BS.1770-4建议测量音频响度。 |
| [`AddNoise`](generated/torchaudio.transforms.AddNoise.html#torchaudio.transforms.AddNoise "torchaudio.transforms.AddNoise") | 根据信噪比对波形进行缩放和添加噪音。 |
| [`Convolve`](generated/torchaudio.transforms.Convolve.html#torchaudio.transforms.Convolve "torchaudio.transforms.Convolve") | 使用直接方法沿着它们的最后一个维度对输入进行卷积。 |
| [`FFTConvolve`](generated/torchaudio.transforms.FFTConvolve.html#torchaudio.transforms.FFTConvolve "torchaudio.transforms.FFTConvolve") | 使用FFT沿着它们的最后一个维度对输入进行卷积。 |
| [`Speed`](generated/torchaudio.transforms.Speed.html#torchaudio.transforms.Speed "torchaudio.transforms.Speed") | 调整波形速度。 |
| [`SpeedPerturbation`](generated/torchaudio.transforms.SpeedPerturbation.html#torchaudio.transforms.SpeedPerturbation "torchaudio.transforms.SpeedPerturbation") | 应用于*语音识别的音频增强*中引入的速度扰动增强[[Ko等，2015](references.html#id58 "Tom Ko，Vijayaditya Peddinti，Daniel Povey和Sanjeev Khudanpur。语音识别的音频增强。在Proc. Interspeech 2015中，3586-3589。2015。doi:10.21437/Interspeech.2015-711。")]. |
| [`Deemphasis`](generated/torchaudio.transforms.Deemphasis.html#torchaudio.transforms.Deemphasis "torchaudio.transforms.Deemphasis") | 沿着其最后一个维度减弱波形。 |
| [`Preemphasis`](generated/torchaudio.transforms.Preemphasis.html#torchaudio.transforms.Preemphasis "torchaudio.transforms.Preemphasis") | 沿着最后一个维度对波形进行预强调。 |

## 特征提取[](#feature-extractions "跳转到此标题")

| [`Spectrogram`](generated/torchaudio.transforms.Spectrogram.html#torchaudio.transforms.Spectrogram "torchaudio.transforms.Spectrogram") | 从音频信号创建频谱图。 |
| --- | --- |
| [`InverseSpectrogram`](generated/torchaudio.transforms.InverseSpectrogram.html#torchaudio.transforms.InverseSpectrogram "torchaudio.transforms.InverseSpectrogram") | 创建一个逆频谱图，从频谱图中恢复音频信号。 |
| [`MelScale`](generated/torchaudio.transforms.MelScale.html#torchaudio.transforms.MelScale "torchaudio.transforms.MelScale") | 将普通STFT转换为带有三角滤波器组的梅尔频率STFT。 |
| [`InverseMelScale`](generated/torchaudio.transforms.InverseMelScale.html#torchaudio.transforms.InverseMelScale "torchaudio.transforms.InverseMelScale") | 从梅尔频率域估计正常频率域中的STFT。 |
| [`MelSpectrogram`](generated/torchaudio.transforms.MelSpectrogram.html#torchaudio.transforms.MelSpectrogram "torchaudio.transforms.MelSpectrogram") | 为原始音频信号创建MelSpectrogram。 |
| [`GriffinLim`](generated/torchaudio.transforms.GriffinLim.html#torchaudio.transforms.GriffinLim "torchaudio.transforms.GriffinLim") | 使用Griffin-Lim变换从线性幅度频谱图计算波形。 |
| [`MFCC`](generated/torchaudio.transforms.MFCC.html#torchaudio.transforms.MFCC "torchaudio.transforms.MFCC") | 从音频信号创建梅尔频率倒谱系数。 |
| [`LFCC`](generated/torchaudio.transforms.LFCC.html#torchaudio.transforms.LFCC "torchaudio.transforms.LFCC") | 从音频信号创建线性频率倒谱系数。 |
| [`ComputeDeltas`](generated/torchaudio.transforms.ComputeDeltas.html#torchaudio.transforms.ComputeDeltas "torchaudio.transforms.ComputeDeltas") | 计算张量的增量系数，通常是频谱图。 |
| [`PitchShift`](generated/torchaudio.transforms.PitchShift.html#torchaudio.transforms.PitchShift "torchaudio.transforms.PitchShift") | 将波形的音调移动`n_steps`步。 |
| [`SlidingWindowCmn`](generated/torchaudio.transforms.SlidingWindowCmn.html#torchaudio.transforms.SlidingWindowCmn "torchaudio.transforms.SlidingWindowCmn") | 对每个话语应用滑动窗口倾斜均值（和可选的方差）归一化。 |
| [`SpectralCentroid`](generated/torchaudio.transforms.SpectralCentroid.html#torchaudio.transforms.SpectralCentroid "torchaudio.transforms.SpectralCentroid") | 计算每个通道沿时间轴的频谱中心。 |
| [`Vad`](generated/torchaudio.transforms.Vad.html#torchaudio.transforms.Vad "torchaudio.transforms.Vad") | 语音活动检测器。 |

## 增强[](#augmentations "跳转到此标题")

以下转换实现了众所周知的增强技术，称为*SpecAugment* [[Park *et al.*, 2019](references.html#id6 "Daniel S. Park, William Chan, Yu Zhang, Chung-Cheng Chiu, Barret Zoph, Ekin D. Cubuk, and Quoc V. Le. Specaugment: a simple data augmentation method for automatic speech recognition. Interspeech 2019, Sep 2019\. URL: http://dx.doi.org/10.21437/Interspeech.2019-2680, doi:10.21437/interspeech.2019-2680.")].

| [`FrequencyMasking`](generated/torchaudio.transforms.FrequencyMasking.html#torchaudio.transforms.FrequencyMasking "torchaudio.transforms.FrequencyMasking") | 在频率域中对频谱图应用掩蔽。 |
| --- | --- |
| [`TimeMasking`](generated/torchaudio.transforms.TimeMasking.html#torchaudio.transforms.TimeMasking "torchaudio.transforms.TimeMasking") | 在时间域中对频谱图应用掩蔽。 |
| [`TimeStretch`](generated/torchaudio.transforms.TimeStretch.html#torchaudio.transforms.TimeStretch "torchaudio.transforms.TimeStretch") | 在不改变音调的情况下拉伸时间的stft。 |

## 损失[](#loss "到这个标题的永久链接")

| [`RNNTLoss`](generated/torchaudio.transforms.RNNTLoss.html#torchaudio.transforms.RNNTLoss "torchaudio.transforms.RNNTLoss") | 计算来自*使用循环神经网络进行序列转导*[[Graves, 2012](references.html#id18 "Alex Graves. Sequence transduction with recurrent neural networks. 2012\. arXiv:1211.3711.")]的RNN Transducer损失。 |
| --- | --- |

## 多通道[](#multi-channel "到这个标题的永久链接")

| [`PSD`](generated/torchaudio.transforms.PSD.html#torchaudio.transforms.PSD "torchaudio.transforms.PSD") | 计算跨通道功率谱密度（PSD）矩阵。 |
| --- | --- |
| [`MVDR`](generated/torchaudio.transforms.MVDR.html#torchaudio.transforms.MVDR "torchaudio.transforms.MVDR") | 执行带有时频掩模的MVDR波束形成的最小方差无失真响应（MVDR）模块。 |
| [`RTFMVDR`](generated/torchaudio.transforms.RTFMVDR.html#torchaudio.transforms.RTFMVDR "torchaudio.transforms.RTFMVDR") | 基于相对传递函数（RTF）和噪声的功率谱密度（PSD）矩阵的最小方差无失真响应（*MVDR*[[Capon, 1969](references.html#id34 "Jack Capon. High-resolution frequency-wavenumber spectrum analysis. Proceedings of the IEEE, 57(8):1408–1418, 1969.")])模块。 |
| [`SoudenMVDR`](generated/torchaudio.transforms.SoudenMVDR.html#torchaudio.transforms.SoudenMVDR "torchaudio.transforms.SoudenMVDR") | 基于*Souden等人*[[Souden *et al.*, 2009](references.html#id28 "Mehrez Souden, Jacob Benesty, and Sofiene Affes. On optimal frequency-domain multichannel linear filtering for noise reduction. In IEEE Transactions on audio, speech, and language processing, volume 18, 260–276\. IEEE, 2009.")]提出的方法的最小方差无失真响应（*MVDR*[[Capon, 1969](references.html#id34 "Jack Capon. High-resolution frequency-wavenumber spectrum analysis. Proceedings of the IEEE, 57(8):1408–1418, 1969.")])模块。 |
